#!/usr/bin/env node

"use strict";

// Imports:
const PROGRAM = require("commander");
const CP = require("child_process");

// CLI constants:
const VERSION = "0.0.1";
const TITLE = "GlassCat-CLI";

const startServerAction = (command)=> {
  //console.log("startServerAction ------------>", command);
  CP.fork(process.cwd() + "/server/com/onsoft/glasscat/cli/scripts/start-server.js");
};

const createJsletAction = (command)=> {
  //console.log("------------>", command);
};

//-> Program Start

process.title = TITLE;

PROGRAM
  .version(VERSION)
  .command("start-server")
  .description("starts a GlassCat server")
  .option("-env, --environment [env]", "defines which setup to use for the server environment")
  .action(startServerAction);

PROGRAM
  .version(VERSION)
  .command("create-jslet")
  .description("creates a new jslet with the specified properties")
  .option("-name, --name <name>", "the name of the jslet to create")
  .option("-path, --path <path>", "the path to the directory in the current workspace where to create the jslet")
  .option("-project, --projectPath <projectPath>", "defines path to the project in the current workspace")
  .option("-comp, --compile [comp]", "indicates whether the JavaScript core should be generated (true), or not (false)")
  .action(createJsletAction);

PROGRAM.parse(process.argv);

if(PROGRAM.args.length === 0) PROGRAM.help();

//<- Program End
